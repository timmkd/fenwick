var ssm=ssm||{},adventData=adventData||{},fen=function(){var a="undefined"!=typeof adventData.currentDate?new Date(adventData.currentDate).setHours(0,0,0,0):(new Date).setHours(0,0,0,0),b=new Date(adventData.startDate).setHours(0,0,0,0),c=function(){return a>=b?!0:!1}(),d=function(a){var b=new Date(a);return[b.getDate(),b.getMonth()+1,b.getFullYear()].join("/")},e=function(){return{init:function(){ssm.addState({id:"narrow",query:"(max-width: 599px)",onEnter:function(){console.log("enter narrow")}}),ssm.addState({id:"medium",query:"(min-width: 600px) and (max-width: 991px)",onEnter:function(){console.log("enter medium")}}),ssm.addState({id:"wide",query:"(min-width: 992px)",onEnter:function(){console.log("enter wide")}})}}}(),f=function(){function b(a){$(".gift.open").removeClass("open"),a.addClass("open")}function e(){g.each(function(){var b=new Date($(this).data("date")).setHours(0,0,0,0),c=$(this).find("a").attr("href"),d=$('.navbar-collapse a[href="'+c+'"]');console.log(b,a),a>=b&&($(this).removeClass("disabled"),d.removeClass("disabled"))})}function f(){g.on("click",function(){var a,e,f,g;c?($(this).hasClass("disabled")?(a=$("#day-closed").html(),e=Handlebars.compile(a),g={number:$(this).data("number"),date:d($(this).data("date"))},f=e(g),ssm.getState("narrow").active&&$.colorbox({width:"100%",opacity:.29,html:f}),ssm.getState("medium").active&&$.colorbox({width:"500",opacity:.29,html:f}),ssm.getState("wide").active&&$.colorbox({width:"600",opacity:.29,html:f})):(b($(this)),$(this).find("a").tab("showQuick")),ga("send","event","advent-calendar","click","Day "+$(this).data("number"),"open")):(a=$("#cal-closed").html(),e=Handlebars.compile(a),g={date:d(adventData.startDate)},f=e(g),ssm.getState("narrow").active&&$.colorbox({width:"300",opacity:.29,html:f}),ssm.getState("medium").active&&$.colorbox({width:"500",opacity:.29,html:f}),ssm.getState("wide").active&&$.colorbox({width:"600",opacity:.29,html:f}),ga("send","event","advent-calendar","click","Day"+$(this).data("number"),"closed"))})}var g=$(".gift"),h=$(".gifts");return{init:function(){e(),f(),h.isotope({itemSelector:".gift",layoutMode:"packery"})}}}(),g=function(){return{init:function(){$(".load-tab").on("click",function(){$(this).hasClass("disabled")?ga("send","event","advent-calendar","click","Day "+$(this).data("number"),"closed"):($(".gift.open").removeClass("open"),$(this).tab("showQuick"),$(this).hasClass("select-day")||ga("send","event","advent-calendar","click","Day "+$(this).data("number"),"open"))})}}}(),h=function(){return{init:function(){$(".header .navbar-collapse a").on("click",function(){$(this).hasClass("disabled")||$(".navbar-toggle").click()})}}}(),i=function(){return{init:function(){$(".product-image").on("click",function(a){ssm.getState("narrow").active&&(a.preventDefault(),$(".products .show").removeClass("show"),$($(this).attr("href")).addClass("show")),ssm.getState("medium").active&&$.colorbox({inline:!0,width:"600",opacity:.29,href:$(this).attr("href")}),ssm.getState("wide").active&&$.colorbox({inline:!0,width:"900",opacity:.29,href:$(this).attr("href")})})}}}();return{init:function(){var a=$("#day-content").html(),b=Handlebars.compile(a),c=adventData,d=b(c);$(".tab-content").append(d),e.init(),f.init(),g.init(),i.init(),h.init()}}}();$(document).ready(function(){fen.init()});